<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>OpenAI Test</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:24px}
    textarea{width:100%;max-width:640px;height:100px}
    pre{white-space:pre-wrap;background:#f6f7f9;padding:12px;border-radius:8px;max-width:640px}
  </style>
</head>
<body>
  <h3>Ask:</h3>
  <textarea id="q">What is a farm?</textarea><br/>
  <button id="send">Send</button>

  <h3>Answer:</h3>
  <pre id="out">(waiting)</pre>

  <script>
    const API = "https://fat-pike-35.deno.dev/"; // <-- paste your Deno Deploy URL
    const $ = (id) => document.getElementById(id);

    $("send").onclick = async () => {
      $("out").textContent = "Sending...";
      try {
        const res = await fetch(API, {
          method: "POST",
          headers: { "Content-Type": "application/json" }, // no key in browser
          body: JSON.stringify({
            model: "gpt-4o-mini",
            messages: [{ role: "user", content: $("q").value }]
          })
        });
        const text = await res.text();
        let data; try { data = JSON.parse(text); } catch {}
        if (!res.ok) { $("out").textContent = `HTTP ${res.status}\n${text}`; return; }
        $("out").textContent = data?.choices?.[0]?.message?.content || text;
      } catch (e) {
        $("out").textContent = "Fetch failed: " + (e?.message || e);
      }
    };
  </script>
</body>
</html>

